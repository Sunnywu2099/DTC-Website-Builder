<style>
  .text-center{
    text-align: center;
  }
  .text-bottom{
    margin-bottom: 32px;
  }
  .selection-btn{
    border-radius: 20px;
    border: 1px solid #000;
    cursor: pointer;
    padding: 40px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
  .nas-selector .top,
  .step{
    margin: 80px auto;
  }
  .nas-selector .selector-box{
    display: flex;
    justify-content: space-between;
    flex-wrap: wrap;
  }
  .step1-selection{
    width: 48%;
  }
  #step2 .selector-box{
    justify-content: center;
    gap: 50px;
  }
  #step2 .selector-box .step2-selection{
    width: calc( (100% - 100px) / 3 );
  }
  #step3 .selector-box .step3-selection{
    width: calc( (100% - 150px) / 4 );
  }
  #step4 .selector-box .step4-selection{
    width: calc( (100% - 150px) / 4 );
  }
</style>

{% assign obj = page.metafields.custom.selector.value | parse_json %}
<script>var nasSelectorData = {{ obj | json }};</script>
{% assign baysObj = obj.bays.value.bays %}
{% assign funcitonsObj = obj.funcitons.value.functions %}
{% assign numbers = obj.number.value %}
{% assign products = obj.products.value %}
{% assign userType = obj.user_type.value %}

<div class="nas-selector container">
  <div class="top text-center">
    <h1 class="heading text-bottom">NAS Selector</h1>
    <p>With a wide range of Synology products to offer, we want to make the selection process as easy as possible. Simply enter your requirements below, and this tool will recommend the most suitable NAS server for you.</p>
  </div>
  
  <!-- step 1 -->
  <div id="step1" class="step">
    <h3 class="section-title text-center text-bottom">Which type of user are you?</h3>
    <div class="selector-box">
      {% for type in userType %}
        <div class="step1-selection text-center selection-btn">{{ type }}</div>  
      {% endfor %}
    </div>
  </div>
  <!-- step 1 -->

  <!-- step 2 -->
  <div id="step2" class="step">
    <h3 class="section-title text-center text-bottom">Which applications would you like to run on your NAS?</h3>
    <p class="text-center text-bottom">Please select 1-3 most frequently-used applications.</p>
    <div class="selector-box">
      {% for function in funcitonsObj %}
        <div class="step2-selection text-center selection-btn">
          <h3>{{ function.type | strip_html }}</h3>
          <p>{{ function.description | strip_html }}</p>
        </div>  
        
      {% endfor %}
    </div>
  </div>
  <!-- step 2 -->

  <!-- step 3 -->
  <div id="step3" class="step">
    <h3 class="section-title text-center text-bottom">How many users plan to use NAS?</h3>
    <div class="selector-box">
      {% for number in numbers %}
        <div class="step3-selection text-center selection-btn">
          <h3>{{ number | strip_html }}</h3>
        </div>  
        
      {% endfor %}
    </div>
  </div>
  <!-- step 3 -->

  <!-- step 4 -->
  <div id="step4" class="step">
    <h3 class="section-title text-center text-bottom">How many bays plan to use NAS?</h3>
    <div class="selector-box">
      {% for bay in baysObj %}
        <div class="step4-selection text-center selection-btn">
          <h3>{{ bay.type | strip_html }}</h3>
          <p>{{ bay.description | strip_html }}</p>
        </div>  
        
      {% endfor %}
    </div>
  </div>
  <!-- step 4 -->

  <!-- step 5 -->
  {%- capture sizes -%}100vw{%- endcapture -%}
  <div id="step5" class="step">
    <h3 class="section-title text-center text-bottom">Based on your needs, the following NAS models are recommended</h3>
    <div class="selector-box">
      {% for product in products %}
        <div class="product-item">
          <div class="product-img">
            {{- product.featured_image | image_url: width: product.featured_image.width | image_tag: is: 'loess-image', loading: 'lazy', sizes: sizes, widths: '200,300,400,500,600,700,800,900,1000,1200,1400,1600,1800,2000,2200,2400,2600,2800,3000,3200', class: 'product-img' -}}
          </div>
          <div class="product-info">{{ product.title }}</div>
        </div>
       {% endfor %}
    </div>
  </div>
  <!-- step 5 -->
</div>


<script>
      console.log(nasSelectorData);

      // 示例：遍历并使用数据
      var bays = nasSelectorData.bays;
      var functions = nasSelectorData.functions;
      var number = nasSelectorData.number;
      var products = nasSelectorData.products;
      var userType = nasSelectorData.user_type;

      // 示例：遍历 bays
      for (var bay in bays) {
        if (bays.hasOwnProperty(bay)) {
          console.log(bay, bays[bay]);
        }
      }

      // 示例：遍历 functions
      for (var func in functions) {
        if (functions.hasOwnProperty(func)) {
          console.log(func, functions[func]);
        }
      }
</script>

{% schema %}
  {
    "name": "Nas selector",
    "settings": [
    ],
    "presets": [
      {
        "name": "Nas selector"
      }
    ]
  }
{% endschema %}