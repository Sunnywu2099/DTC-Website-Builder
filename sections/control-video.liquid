<style>
  video{
    display: block;
    width: 100%;
  }
  .btn-box{
        display: flex;
    justify-content: center;
    gap: 50px;
  }
  .btn-box span{
    cursor: pointer;
  }
</style>

<div class="video-control">
  <div class="video-wrapper">
    {{ section.settings.video | video_tag:class:"video-banner", autoplay: false, loop: false, muted: true, controls: false, image_size:'master' }}
  </div>
  <div class="btn-box">
    <span class="prev">prev</span>
    <span class="next">next</span>
  </div>
</div>


<script>
  console.log($('.video-banner'))
  let banner_video = $('.video-banner')[0];
  let prev_btn = $('.btn-box .prev');
  let next_btn = $('.btn-box .next');
  next_btn.click(function(){
    banner_video.play(); // 开始播放
    // 在2秒后停止播放
    setTimeout(function(){
        banner_video.pause();
    }, 2000); // 2000 毫秒 = 2 秒
  })
  prev_btn.click(function(){
    let interval = 10; // 每次更新时间为100毫秒
    let duration = 2; // 倒序播放的持续时间 (秒)
    let step = (duration * 1000) / interval; // 倒序的步进值
    let counter = 0;

    // 创建定时器，倒序更新 currentTime
    let reverseInterval = setInterval(function(){
        // 如果倒序超过了2秒，或者当前时间到达0，停止倒序
        if (counter >= step || banner_video.currentTime <= 0) {
            clearInterval(reverseInterval); // 停止定时器
            banner_video.pause(); // 确保视频暂停
        } else {
            banner_video.currentTime -= interval / 1000; // 每次减少 100 毫秒
            counter++;
        }
    }, interval);
  })
</script>

{% schema %}
  {
    "name": "SPX Video conntrol",
    "settings": [
      {
        "type": "video",
        "id": "video",
        "label": "A Shopify-hosted video"
      }
    ],
  "presets": [
    {
      "name": "SPX Video conntrol"
    }
  ]
    
  }
{% endschema %}